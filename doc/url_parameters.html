<!doctype html>
<html lang="en-US" prefix="og: http://ogp.me/ns#" class="no-js">
<head>
    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>Managing URL parameters | Splash router</title>

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <link rel="apple-touch-icon" sizes="57x57" href="/dist/img/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/dist/img/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/dist/img/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/dist/img/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/dist/img/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/dist/img/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/dist/img/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/dist/img/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/dist/img/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/dist/img/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/dist/img/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/dist/img/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/dist/img/favicon/favicon-16x16.png">

    <link href="//fonts.googleapis.com/css?family=Roboto:400,700,300,500" rel="stylesheet" type="text/css">

    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/dist/img/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <meta name="msapplication-TileColor" content="#f01d4f">
    <meta name="msapplication-TileImage" content="//www.thecodingmachine.com/wp-content/themes/thecodingmachine/library/images/win8-tile-icon.png">

    <script>
        window.resourceBaseUrl = 'https://thecodingmachine.github.io/splash-router';
    </script>

    <style>
        /** quick fix because bootstrap <pre> has a background-color. */
        pre code { background-color: inherit; }
    </style>

    <link rel="stylesheet" type="text/css" href="https://thecodingmachine.github.io/splash-router/assets/main.css">
                

    <link rel='stylesheet' id='font-awesome-css'  href='//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css' type='text/css' media='all' />
    <link rel='stylesheet' id='google-roboto-css'  href='//fonts.googleapis.com/css?family=Roboto%3A100%2C400%2C300%2C400italic%2C500%2C700' type='text/css' media='all' />

    <style>
        pre.hljs {padding: 5px;}
        pre.hljs code {}
            </style>
        <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-10196481-4', 'auto');
        ga('send', 'pageview');

    </script>
    </head>
<body class="">

<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div >
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <img class="img-responsive" src="https://thecodingmachine.github.io/splash-router/doc/images/logo.png" alt="" style="position: absolute;">
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav text-left">
                <li><a href="https://thecodingmachine.github.io/splash-router/">ABOUT</a></li>
                                                            <li class=" visible-xs-block">
                            <a href="https://thecodingmachine.github.io/splash-router/index.html">
                                Introduction
                            </a>
                        </li>
                                                                                                                    <li class=" visible-xs-block">
                            <a href="https://thecodingmachine.github.io/splash-router/doc/install/index.html">
                                Installing Splash
                            </a>
                        </li>
                                                                                <li class=" visible-xs-block">
                            <a href="https://thecodingmachine.github.io/splash-router/doc/install/mouf.html">
                                Install in Mouf
                            </a>
                        </li>
                                                                                <li class=" visible-xs-block">
                            <a href="https://thecodingmachine.github.io/splash-router/doc/install/standalone.html">
                                Install using Service providers
                            </a>
                        </li>
                                                                                                                    <li class=" visible-xs-block">
                            <a href="https://thecodingmachine.github.io/splash-router/doc/writing_controllers_manually.html">
                                Writing controllers
                            </a>
                        </li>
                                                                                                                    <li class=" visible-xs-block">
                            <a href="https://thecodingmachine.github.io/splash-router/doc/mouf_integration/writing_controllers.html">
                                Controller creation wizard
                            </a>
                        </li>
                                                                                <li class=" visible-xs-block">
                            <a href="https://thecodingmachine.github.io/splash-router/doc/mouf_integration/url_routing.html">
                                Advanced: configuring routing
                            </a>
                        </li>
                                                                                                                    <li class="active visible-xs-block">
                            <a href="https://thecodingmachine.github.io/splash-router/doc/url_parameters.html">
                                Managing URL parameters
                            </a>
                        </li>
                                                                                <li class=" visible-xs-block">
                            <a href="https://thecodingmachine.github.io/splash-router/doc/filters.html">
                                Writing your own filters
                            </a>
                        </li>
                                                                                <li class=" visible-xs-block">
                            <a href="https://thecodingmachine.github.io/splash-router/doc/migrating.html">
                                Migrating from older version
                            </a>
                        </li>
                                                    <li><a href="http://www.thecodingmachine.com/">TheCodingMachine</a></li>
                                <li><a href="https://github.com/thecodingmachine/splash-router"><img src="https://thecodingmachine.github.io/splash-router/img/GitHub-Mark-Light-20px.png" /> Github</a></li>
                            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<!-- Full Width Image Header with Logo -->
<!-- Image backgrounds are set within the full-width-pics.css file. -->
<div id="wrapper">
    <a href="#menu-toggle" class="burger-position" id="menu-toggle" ><img src="https://thecodingmachine.github.io/splash-router/doc/images/hamburger.png"> </a>
    <!-- Sidebar -->
    <div id="sidebar-wrapper">
        <ul class="sidebar-nav">
                                                <li class="">
                        <a href="https://thecodingmachine.github.io/splash-router/index.html">
                            Introduction
                        </a>
                    </li>
                                                                <li>
                        <h4>Installation</h4>
                    </li>
                                                                <li class="">
                        <a href="https://thecodingmachine.github.io/splash-router/doc/install/index.html">
                            Installing Splash
                        </a>
                    </li>
                                                                <li class="">
                        <a href="https://thecodingmachine.github.io/splash-router/doc/install/mouf.html">
                            Install in Mouf
                        </a>
                    </li>
                                                                <li class="">
                        <a href="https://thecodingmachine.github.io/splash-router/doc/install/standalone.html">
                            Install using Service providers
                        </a>
                    </li>
                                                                <li>
                        <h4>Basics</h4>
                    </li>
                                                                <li class="">
                        <a href="https://thecodingmachine.github.io/splash-router/doc/writing_controllers_manually.html">
                            Writing controllers
                        </a>
                    </li>
                                                                <li>
                        <h4>Integrations - Mouf</h4>
                    </li>
                                                                <li class="">
                        <a href="https://thecodingmachine.github.io/splash-router/doc/mouf_integration/writing_controllers.html">
                            Controller creation wizard
                        </a>
                    </li>
                                                                <li class="">
                        <a href="https://thecodingmachine.github.io/splash-router/doc/mouf_integration/url_routing.html">
                            Advanced: configuring routing
                        </a>
                    </li>
                                                                <li>
                        <h4>Advanced</h4>
                    </li>
                                                                <li class="active">
                        <a href="https://thecodingmachine.github.io/splash-router/doc/url_parameters.html">
                            Managing URL parameters
                        </a>
                    </li>
                                                                <li class="">
                        <a href="https://thecodingmachine.github.io/splash-router/doc/filters.html">
                            Writing your own filters
                        </a>
                    </li>
                                                                <li class="">
                        <a href="https://thecodingmachine.github.io/splash-router/doc/migrating.html">
                            Migrating from older version
                        </a>
                    </li>
                                    </ul>
    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">
        <header class="image-bg-fluid-height skew">
            <div class="wrapper content">
                <!-- /
              <h4 class="glitch">DISCOVERY</h4>
               -->
            </div>

        </header>
        <div class="container pt100">
            <div class="row">
                <div class="col-xs-12">
                    <h1>Managing URL parameters <small></small></h1>                    <h2 id="default-behaviour">Default behaviour</h2>
<p>By default, when an action is created, each parameter of the function should be passed in the URL. Here is a sample:</p>
<pre><code class="language-php">/**
 * My action with 2 compulsory parameters.
 *
 * @URL("/test")
 * @param string $var1
 * @param string $var2
 */
public function my_action($var1, $var2) { ... } </code></pre>
<p>In this action, both parameters are compulsory. If one of the parameters is not passed by the user, an error message is displayed (&quot;HTTP 400 Bad request&quot; return code).
Hopefully, you can get optional parameters using parameters default values:</p>
<pre><code class="language-php">/**
 * My action with 1 compulsory parameter and one optional.
 *
 * @URL("/test")
 * @param string $var1
 * @param string $var2
 */
public function my_action($var1, $var2 = 42) { ... } </code></pre>
<p>In this sample, if the user does not pass the &quot;var2&quot; parameter in the URL, it will be equal to 42.
The URL might be: <code>http://[server-url]/[webapp-path]/test?var1=param1</code></p>
<h2 id="injecting-psr-7-request-object-as-a-parameter">Injecting PSR-7 Request object as a parameter</h2>
<p>Splash 7+ has native support for PSR-7 <code>RequestInterface</code> and for <code>ServerRequestInterface</code> objects.</p>
<p>This means that Splash will automatically inject a <code>ServerRequest</code> object into your action if your action expects a <code>RequestInterface</code> or a <code>ServerRequestInterface</code>  object:</p>
<pre><code class="language-php">use Psr\Http\Message\ServerRequestInterface;
...

/**
 * My action with the request object filled
 *
 * @URL("/test")
 * @param ServerRequestInterface $request
 */
public function my_action(ServerRequestInterface $request) {
    $param = $request-&gt;getQueryParams()['param'];
    ...
} </code></pre>
<p>Note: you should use the <code>ServerRequest</code> object instead of accessing directly <code>$_FILES</code>, <code>$_SERVER</code>, <code>$_COOKIES</code>, or HTTP headers.</p>
<h2 id="advanced-behaviour">Advanced behaviour</h2>
<p>You are a power user? Splash has a number of extension points including one that let's you define how parameters are injected in the action.</p>
<p>You can add your own plugins to automatically fill some parameters of the request (we call those <code>ParameterFetchers</code>).</p>
<p>You could write a parameter fetcher to:</p>
<ul>
<li>automatically plug your ORM to Splash (by injecting entities directly into the action)</li>
<li>or inject a session</li>
<li>or inject services (à la Angular)</li>
<li>or really... whatever you might imagine!</li>
</ul>
<h3 id="writing-a-parameter-fetcher">Writing a parameter fetcher</h3>
<p>To write a parameter fetcher, you need to implement the <code>ParameterFetcher</code> interface:</p>
<pre><code class="language-php">/**
 * Classes implementing this interface can create parameter fetchers that will fill parameters of actions.
 */
interface ParameterFetcher
{
    /**
     * Returns whether this fetcher factory can handle the parameter passed in parameter for the url $url.
     *
     * @param ReflectionParameter $reflectionParameter
     * @param string              $url
     *
     * @return bool
     */
    public function canHandle(ReflectionParameter $reflectionParameter, string $url = null) : bool;

    /**
     * Returns some data needed by this fetcher to fetch data from the request.
     * This data MUST be serializable (and will be serialized). This function will be called only once
     * and data cached. You can perform expensive computation in this function.
     *
     * @param ReflectionParameter $reflectionParameter
     * @param string|null         $url
     *
     * @return mixed
     */
    public function getFetcherData(ReflectionParameter $reflectionParameter, string $url = null);

    /**
     * Returns the value to be injected in this parameter.
     *
     * @param mixed                $data    The data generated by "getFetcherData"
     * @param SplashRequestContext $context
     *
     * @return mixed
     */
    public function fetchValue($data, SplashRequestContext $context);
}</code></pre>
<p>Notice how there are 3 methods:</p>
<ul>
<li><code>canHandle</code> is called by Splash on each parameter. The parameter fetcher must return <code>true</code> is it can handle this parameter, or <code>false</code> if it cannot.</li>
<li>If <code>canHandle</code> returns <code>true</code>, <code>getFetcherData</code> is called. This method can return any <strong>serializable</strong> data that will be used to analyze the parameter. This method is called only once per parameter. The result is put in cache. You can perform expensive computation in this function.</li>
<li><code>fetchValue</code> is where the real work happens. For each request and each parameter, the <code>fetchValue</code> method is called. It must return the value that is injected into the parameter. The <code>fetchValue</code> method receives the serialized data that was computed by the <code>getFetcherData</code> method along the request, bundled in the <code>SplashRequestContext $context</code> object.</li>
</ul>

                    <p class="fork-and-edit">
                        Found a typo? Something is wrong in this documentation? Just
                        <a href="https://github.com/thecodingmachine/splash-router/blob/master/doc/url_parameters.md">fork and edit it</a>!
                    </p>
                </div>
            </div>
        </div>
    </div>
    <!-- /#page-content-wrapper -->

</div>
<div class="footer">
    <div class="container-fluid">
        <footer class="row" id="footer">
            <div class="col-xs-12">
                Made with <span class="pulse2 glyphicon glyphicon-heart" style="color: red" aria-hidden="true"></span><span class="sr-only">love</span> by <a href="https://www.thecodingmachine.com/"><img src="https://thecodingmachine.github.io/splash-router/img/logo.png" alt="TheCodingMachine"></a> for all open-source lovers
                <span class="copyright">&copy; 2016 - 2018 <a href="https://www.thecodingmachine.com/">TheCodingMachine</a> - All Rights Reserved</span>
                Powered by <a href="http://couscous.io/">Couscous</a></span>
            </div>
        </footer>
    </div>
</div>

<!-- /#wrapper -->
<script type='text/javascript' src='https://thecodingmachine.github.io/splash-router/assets/app.bundle.js'></script>
<script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
</script>
</body>
</html>
